<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- 
Copyright (C) 2003 Northwertern University and Argonne National
Laboratory.

Portions of this software were developed by the Unidata Program at the
University Corporation for Atmospheric Research.

Access and use of this software shall impose the following obligations and
understandings on the user. The user is granted the right, without any fee or
cost, to use, copy, modify, alter, enhance and distribute this software, and
any derivative works thereof, and its supporting documentation for any purpose
whatsoever, provided that this entire notice appears in all copies of the
software, derivative works and supporting documentation.  Further, Northwestern
University and Argonne National Laboratory request that the user credit
Northwestern University and Argonne National Laboratory in any publications
that result from the use of this software or in any product that includes this
software.  The names Northwestern University and Argonne National Laboratory,
however, may not be used in any advertising or publicity to endorse or promote
any products or commercial entity unless specific written permission is
obtained from Northwestern University and Argonne National Laboratory. The user
also understands that Northwestern University and Argonne National Laboratory
are not obligated to provide the user with any support, consulting, training or
assistance of any kind with regard to the use, operation and performance of
this software nor to provide the user with any updates, revisions, new versions
or "bug fixes."

THIS SOFTWARE IS PROVIDED BY NORTHWESTERN UNIVERSITY AND ARGONNE NATIONAL
LABORATORY "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL NORTHWESTERN UNIVERSITY
AND ARGONNE NATIONAL LABORATORY BE LIABLE FOR ANY SPECIAL, INDIRECT OR
CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE,
DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS
ACTION, ARISING OUT OF OR IN CONNECTION WITH THE ACCESS, USE OR PERFORMANCE OF
THIS SOFTWARE.
 -->
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>ncmpi_def_var_fill (PnetCDF C Interface Guide)</title>

<meta name="description" content="ncmpi_def_var_fill (PnetCDF C Interface Guide)">
<meta name="keywords" content="ncmpi_def_var_fill (PnetCDF C Interface Guide)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Combined-Index.html#Combined-Index" rel="index" title="Combined Index">
<link href="Variables.html#Variables" rel="up" title="Variables">
<link href="ncmpi_005finq_005fvar_005ffill.html#ncmpi_005finq_005fvar_005ffill" rel="next" title="ncmpi_inq_var_fill">
<link href="ncmpi_005fdef_005fvar.html#ncmpi_005fdef_005fvar" rel="prev" title="ncmpi_def_var">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src='https://www.googletagmanager.com/gtag/js?id=G-CJ8LEHVTXW'></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CJ8LEHVTXW');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45938012-1', 'auto');
  ga('create', 'UA-45937491-1', 'auto', {'name': 'pnetcdfTracker'});
  ga('create', 'UA-46002884-1', 'auto', {'name': 'parallelnetcdfTracker'});

  ga('send', 'pageview');
  ga('pnetcdfTracker.send', 'pageview');
  ga('parallelnetcdfTracker.send', 'pageview');
</script>
</head>

<body lang="en">
<a name="ncmpi_005fdef_005fvar_005ffill"></a>
<div class="header">
<p>
Next: <a href="ncmpi_005finq_005fvar_005ffill.html#ncmpi_005finq_005fvar_005ffill" accesskey="n" rel="next">ncmpi_inq_var_fill</a>, Previous: <a href="ncmpi_005fdef_005fvar.html#ncmpi_005fdef_005fvar" accesskey="p" rel="prev">ncmpi_def_var</a>, Up: <a href="Variables.html#Variables" accesskey="u" rel="up">Variables</a> &nbsp; [<a href="Combined-Index.html#Combined-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Set-fill-mode-for-a-Variable_003a-ncmpi_005fdef_005fvar_005ffill"></a>
<h3 class="section">4.4 Set fill mode for a Variable: <code>ncmpi_def_var_fill</code></h3>
<a name="index-ncmpi_005fdef_005fvar_005ffill"></a>
<a name="index-ncmpi_005fdef_005fvar_005ffill_002c-example"></a>
<a name="index-fill"></a>
<a name="index-variables_002c-fill"></a>


<p>The API ncmpi_def_var_fill sets the fill mode parameters for a
variable. This API is only available in version 1.6.1 and later.
</p>

<p>This API must be called after the variable is defined, but before
ncmpi_enddef is called.
</p>
<a name="Operational-Mode-29"></a>
<h3 class="heading">Operational Mode</h3>
<p>This API is a collective subroutine.
</p>
<p>This API must be called while the file is in define mode.
</p>
<a name="Usage-29"></a>
<h3 class="heading">Usage</h3>

<div class="example">
<pre class="example">int ncmpi_def_var_fill(int         ncid,
                       int         varid,
                       int         no_fill,
                       const void *fill_value);
</pre></div>

<dl compact="compact">
<dt><code>ncid</code></dt>
<dd><p>NetCDF ID, from a previous call to ncmpi_open or ncmpi_create.
</p>
</dd>
<dt><code>varid</code></dt>
<dd><p>Variable ID. This value must be consistent across all calling MPI processes.
</p>
</dd>
<dt><code>no_fill</code></dt>
<dd><p>Set no_fill mode for a variable.
1 for on (not to fill) and 0 for off (to fill).
When this mode is on, fill values will
not be written for the variable. This is helpful in high performance applications.
The mode may only be changed after the variable is defined, but before it
is committed to disk (i.e. before the first ncmpi_enddef after the ncmpi_def_var.)
</p>
</dd>
<dt><code>fill_value</code></dt>
<dd><p>A pointer to a value which will be used as the fill value for the
variable. Must be the same type as the variable. This will be written
to a _FillValue attribute, created for this purpose. If NULL, this
argument will be ignored and the default fill value is used.
</p>
</dd>
</dl>

<a name="Return-Error-Codes-26"></a>
<h3 class="heading">Return Error Codes</h3>
<p>ncmpi_def_var_fill returns the value NC_NOERR if no errors
occurred. Otherwise, the returned status indicates an error. Possible
causes of errors include:
</p><ul>
<li> NC_EBADID: Bad ncid. The specified netCDF ID does not refer to an opened netCDF file.
</li><li> NC_EPERM: Attempt write operations in read-only file.
</li><li> NC_ENOTINDEFINE: Operation not allowed in data mode.
</li><li> NC_ENOTVAR: Cannot find this variable.
</li><li> NC_EGLOBAL: NC_GLOBAL is considered invalid variable ID for this API.
</li><li> NC_EMULTIDEFINE_VAR_FILL_MODE: Fill modes are inconsistent among all MPI processes.
</li><li> NC_EMULTIDEFINE_VAR_FILL_VALUE: Fill values are inconsistent among all MPI processes.
</li></ul>

<a name="Example-28"></a>
<h3 class="heading">Example</h3>

<p>Here is an example using ncmpi_def_var to create a variable named rh of
type double with three dimensions and turn on the variable&rsquo;s fill mode using
the PnetCDF default fill value.
</p>
<div class="example">
<pre class="example">#include &lt;pnetcdf.h&gt;

/* create a file */
/* define dimensions */
    ...
status = <a href="ncmpi_005fdef_005fvar.html#ncmpi_005fdef_005fvar">ncmpi_def_var</a>(ncid, &quot;rh&quot;, NC_DOUBLE, 3, dimids, &amp;varid);
if (status != NC_NOERR) handle_error(status);

/* set fill mode to yes and use the default fill values */
status = <a href="#ncmpi_005fdef_005fvar_005ffill">ncmpi_def_var_fill</a>(ncid, varid, 0, NULL);
if (status != NC_NOERR) handle_error(status);

status = <a href="ncmpi_005fenddef.html#ncmpi_005fenddef">ncmpi_enddef</a>(ncid);
if (status != NC_NOERR) handle_error(status);
</pre></div>

<a name="Full-example-C-program-4"></a>
<h3 class="heading">Full example C program</h3>
<ul>
<li> <a href="https://github.com/Parallel-NetCDF/PnetCDF/tree/master/examples/C/fill_mode.c">fill_mode.c</a>
</li><li> The above programs are available in all PnetCDF releases under directory examples/C.
</li></ul>


<hr>
<div class="header">
<p>
Next: <a href="ncmpi_005finq_005fvar_005ffill.html#ncmpi_005finq_005fvar_005ffill" accesskey="n" rel="next">ncmpi_inq_var_fill</a>, Previous: <a href="ncmpi_005fdef_005fvar.html#ncmpi_005fdef_005fvar" accesskey="p" rel="prev">ncmpi_def_var</a>, Up: <a href="Variables.html#Variables" accesskey="u" rel="up">Variables</a> &nbsp; [<a href="Combined-Index.html#Combined-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
