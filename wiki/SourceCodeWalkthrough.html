<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  


  <head>
    <title>
      SourceCodeWalkthrough â€“ parallel-netcdf
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/projects/parallel-netcdf/search" />
        <link rel="help" href="/projects/parallel-netcdf/wiki/TracGuide" />
        <link rel="alternate" href="/projects/parallel-netcdf/wiki/SourceCodeWalkthrough?format=txt" type="text/x-trac-wiki" title="Plain Text" />
        <link rel="start" href="/projects/parallel-netcdf/wiki" />
        <link rel="stylesheet" href="/projects/parallel-netcdf/chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="/projects/parallel-netcdf/chrome/common/css/wiki.css" type="text/css" />
        <link rel="shortcut icon" href="/projects/parallel-netcdf/chrome/common/trac.ico" type="image/x-icon" />
        <link rel="icon" href="/projects/parallel-netcdf/chrome/common/trac.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="/projects/parallel-netcdf/search/opensearch" title="Search parallel-netcdf" />
    <script type="text/javascript" src="/projects/parallel-netcdf/chrome/common/js/jquery.js"></script><script type="text/javascript" src="/projects/parallel-netcdf/chrome/common/js/babel.js"></script><script type="text/javascript" src="/projects/parallel-netcdf/chrome/common/js/messages/en_US.js"></script><script type="text/javascript" src="/projects/parallel-netcdf/chrome/common/js/trac.js"></script><script type="text/javascript" src="/projects/parallel-netcdf/chrome/common/js/search.js"></script><script type="text/javascript" src="/projects/parallel-netcdf/chrome/common/js/folding.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/projects/parallel-netcdf/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="main">
        <div id="content" class="wiki">
      	  <div class="wikipage searchable">
        
          
          <div id="wikipage"><p>
(I (robl) am still working on this document, but wanted to save my work...)
</p>
<h1 id="BigPicture">Big Picture</h1>
<p>
David A. Wheeler's 'SLOCCount' says we have about 40k lines of code, but a lot of that belongs to the test cases and the generated fortran bindings.  There are really just one big directory of code, one big directory of generated fortran wrappers for the code in that first directory, and a directory of tests. When we started parallel-netcdf, we started with netcdf-3.5.0.  We changed the programming interface a bit to accommodate parallel I/O constructs like MPI communicators and MPI Info objects.  Then we ripped out all the I/O routines and put MPI-IO in its place.  If you are familiar with the serial netcdf code, then parallel-netcdf will look familiar to you (though this was much more the case when comparing parallel-netcdf-1.1.0 and netcdf-3.6.3: the latest versions of these two projects are starting to diverge quite a bit).
</p>
<h1 id="srclib">src/lib</h1>
<p>
The biggest contribution parallel-netcdf makes, as mentioned above, is the fact that it uses MPI-IO for I/O, so we'll start there for this walk-through.  1.2.0 introduced a big re-organizing of the source code, resulting in a lot less duplication.  All the routines essentially perform subarray I/O via MPI-IO calls.  Set the file view with a subarray or hvector and then perform the MPI_File_read_all or MPI_File_write_all call. 
</p>
</div>
        
        
      </div>
      

    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="/projects/parallel-netcdf/wiki/SourceCodeWalkthrough?format=txt">Plain Text</a>
        </li>
      </ul>
    </div>
    </div>
    </body>
</html>